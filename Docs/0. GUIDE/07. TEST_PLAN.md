TEST_PLAN.md
경로: docs/TEST_PLAN.md

markdown
복사
편집
# 테스트 계획 및 사례

이 문서는 프로젝트의 테스트 전략과 테스트 사례를 설명합니다. 모든 기능의 안정성과 정확성을 보장하기 위해 철저한 단위 테스트, 통합 테스트, 시스템 테스트를 수행합니다.

---

## 테스트 전략
### 1. 단위 테스트
- 각 모듈 및 함수의 동작을 개별적으로 테스트.
- Pytest를 사용하여 구현.

### 2. 통합 테스트
- 모듈 간 상호작용을 테스트하여 데이터 흐름의 정확성을 검증.
- 예: 데이터 수집 모듈과 매매 실행 모듈의 연동.

### 3. 시스템 테스트
- 전체 시스템의 통합된 동작을 테스트.
- 실시간 데이터와 거래소 API를 사용한 실제 시뮬레이션.

### 4. 회귀 테스트
- 기존 기능이 새 업데이트로 인해 손상되지 않았는지 확인.

---

## 주요 테스트 파일
1. **`tests/test_collector.py`**
   - 데이터 수집 모듈 테스트.
   - API 호출, 데이터 형식 변환, 에러 처리 테스트.

2. **`tests/test_order_manager.py`**
   - 매매 실행 모듈 테스트.
   - 주문 생성, 주문 취소, 주문 상태 확인 테스트.

3. **`tests/test_inference.py`**
   - AI/ML 모델 예측 테스트.
   - 입력 데이터 처리, 예측 결과의 정확성 테스트.

4. **`tests/test_risk_management.py`**
   - 리스크 관리 모듈 테스트.
   - 포지션 크기 계산, 손익비 조정 테스트.

---

## 테스트 사례
### 1. 데이터 수집
- **목표**: 거래소 API에서 데이터를 성공적으로 수집하고 저장.
- **테스트 시나리오**:
  - 정상 API 호출로 데이터 반환.
  - 네트워크 실패 시 재시도 로직 작동.
  - 반환된 데이터 형식 검증.

### 2. 매매 실행
- **목표**: 주문 생성, 취소, 상태 확인 기능이 정상 동작.
- **테스트 시나리오**:
  - 시장가 주문과 지정가 주문 생성.
  - 주문 실패 시 재시도.
  - 주문 성공 시 포지션 업데이트 확인.

### 3. AI/ML 모델
- **목표**: 신호 생성 및 모델 평가 기능 검증.
- **테스트 시나리오**:
  - 학습 데이터로 모델 학습 후 정확도 검증.
  - 예측 결과가 샤프 비율, 최대 손실 등 금융 지표 기준 만족.

### 4. 리스크 관리
- **목표**: 포지션 크기와 손익비 계산 로직이 정확히 동작.
- **테스트 시나리오**:
  - 계좌 잔고와 레버리지 설정에 따른 포지션 크기 계산.
  - 목표 손익비가 전략에 부합하는지 확인.

---

## 테스트 도구 및 환경
- **테스트 프레임워크**: Pytest.
- **Mocking 도구**: `unittest.mock`으로 외부 API 호출 Mocking.
- **CI 환경**: GitHub Actions를 통해 테스트 자동화.

---

## 테스트 실행 방법
1. 테스트 환경 설정:
   ```bash
   conda activate trading_env
   pip install pytest
   ```

2. 테스트 실행:
   ```bash
   pytest tests/
   ```

3. 테스트 보고서 생성:
   ```bash
   pytest --html=report.html --self-contained-html
   ```

---

## 참고 문서
- README.md
- DEVELOPMENT_PLAN.md
